<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yn.mapper.PostMapper">

    <insert id="insertPost" parameterType="com.yn.entity.Post">
        INSERT INTO posts (title, content, summary, cover_url, status, user_id, category_id, allow_comments, is_public, is_pinned)
        VALUES (#{title}, #{content}, #{summary}, #{coverUrl}, #{status}, #{userId}, #{categoryId}, #{allowComments}, #{isPublic}, #{isPinned})
    </insert>

    <update id="updatePost" parameterType="com.yn.entity.Post">
        UPDATE posts
        SET title = #{title}, content = #{content}, summary = #{summary}, cover_url = #{coverUrl},
            status = #{status}, category_id = #{categoryId}, allow_comments = #{allowComments},
            is_public = #{isPublic}, is_pinned = #{isPinned}, updated_at = CURRENT_TIMESTAMP
        WHERE id = #{id}
    </update>

    <select id="selectPostById" resultType="com.yn.entity.Post">
        SELECT * FROM posts WHERE id = #{id}
    </select>

    <delete id="deletePost" parameterType="java.lang.Long">
        DELETE FROM posts WHERE id = #{id}
    </delete>

</mapper>
